const mongoose = require('mongoose');
const Song = require('../models/song.model');
const mongoDB = "mongodb+srv://admin:simple@harveyscluster.ltgag1e.mongodb.net/?retryWrites=true&w=majority";

mongoose.connect(mongoDB)
  .then(() => {
    console.log('Connected to MongoDB');
    


    const newSong = new Song({
      title: "Do I Wanna Know?",
      artist: "Arctic Monkeys",
      difficultyRating: 1,
      tab: {
        "Intro": "e|----------\nB|----------\nG|----------\nD|----------\nA|------1---\nE|--1h3---3-\n",
        "Verse/Main riff": "e|---------------------------------------------------------------\nB|---------------------------------------------------------------\nG|---------------------------------------------------------------(5x)\nD|--------1h3-1~-------------------------------------------------\nA|------1--------3h5-3~-----1-3/5-3~----1h3-5-3h5-----------1----\nE|--1h3-------------------------------------------3~----1h3--3~--\n",
        "Chorus": "e|-----------------------------------------------\nB|-----------------------------------------------\nG|-----------------------------------------------\nD|--------1h3-1~---------------------------------\nA|------1--------3/5-3~-----1-3/5--3~---/5~------\nE|--1h3------------------------------------------\n",
        "Break": "e|--------------------------------------\nB|--------------------------------------\nG|-------------------------------------- (2x)\nD|--------------------------------------\nA|--/6~---------3~------/5--------------\nE|-------------------------3~------3~---\n",
        "Outro": "e|----------------------------------------------------------\nB|----------------------------------------------------------\nG|---------------------------------------------------------- (4x)\nD|----------------------------------------------------------\nA|-/10----6~---3-5-6-5-3~---1-3~---1-3/5-------------1------\nE|---------------------------------------3~------1h3---3~---\n"
      }
    });


    newSong.save()
      .then(savedSong => {
        console.log('Song saved:', savedSong);
      })
      .catch(error => {
        console.error('Error saving song:', error);
      })
      .finally(() => {
        mongoose.disconnect()
          .then(() => {
            console.log('Disconnected from MongoDB');
          })
          .catch(error => {
            console.error('Error disconnecting from MongoDB:', error);
          });
      });
  })
  .catch(error => {
    console.error('Error connecting to MongoDB:', error);
  });


   