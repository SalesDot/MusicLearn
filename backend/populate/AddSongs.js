const mongoose = require('mongoose');
const Song = require('../models/song.model');
const mongoDB = "mongodb+srv://admin:simple@harveyscluster.ltgag1e.mongodb.net/?retryWrites=true&w=majority";

mongoose.connect(mongoDB)
  .then(() => {
    console.log('Connected to MongoDB');

    const newSong = new Song({
      title: "Stairway to Heaven",
      artist: "Ledd Zeppelin",
      difficultyRating: 4,
      tab: {
        "Intro": [
          {
            "Am": [
              "-5------------3----------------|-1--3-|-5------------3-------------|--1--3-|",
              "-5------------3----------------|-1--3-|-5------------3-------------|--1--3-|",
              "-5------------4----------------|-2--4-|-5------------4-------------|--2--4-|",
              "-7------------5----------------|-3--5-|-7------------5-------------|--3--5-|",
              "-7------------5----------------|-3--5-|-7------------5-------------|--3--5-|",
              "-5------------3----------------|-1--3-|-5------------3-------------|--1--3-|"
            ]
          }
        ],
        "Verse": [
          {
            "Am": [
              "-5------------3----------------|-1--3-|-5------------3-------------|--1--3-|",
              "-5------------3----------------|-1--3-|-5------------3-------------|--1--3-|",
              "-5------------4----------------|-2--4-|-5------------4-------------|--2--4-|",
              "-7------------5----------------|-3--5-|-7------------5-------------|--3--5-|",
              "-7------------5----------------|-3--5-|-7------------5-------------|--3--5-|",
              "-5------------3----------------|-1--3-|-5------------3-------------|--1--3-|"
            ]
          },
          {
            "G": [
              "-3--3-3-3--3--0-0---7-|--5---3---5----|-3--3-3-3--3--0-0-|-2-----2-2-2-2-0-0-|",
              "-1--1-1-1--1--1-1---8-|--7---5---7----|-1--1-1-1--1--1-3-|-3-----3-3-3-3-0-0-|",
              "-2--2-2-2--2--2-2---9-|--7---5---7----|-2--2-2-2--2--2-0-|-2-----2-2-2-2-0-0-|",
              "-2--2-2-2--2--2-2---0-|----------0----|-2--2-2-2--2--2---|----0--0-----------|",
              "----------------------|-------------0-|------------------|-------------------|",
              "----------------------|---------------|------------------|-------------------|"
            ]
          },
          {
            "Fmaj7": [
              "------------------|------------------------|-----------------0--|--0--------|",
              "---------1------3-|-0h1----------1---------|-------1---------1--|--1--------|",
              "-------0------0---|-----2-------2----------|-----0--------0--2--|--2--------|",
              "-----2------0-----|---------2--------------|---2--------0----3--|--2--------|",
              "-0h3------2-------|-------0----------0--2--|-3--------2------3--|--0---0-2--|",
              "------------------|------------------------|-----------------1--|-----------|"
            ]
          }
        ],
        "Chorus": [
          {
            "Am": [
              "-3---3-3-3--3--0-0-|-2-------2-------|-3--3-3-3--3--0-0---7-|--5---3---5----|",
              "-1---1-1-1--1--1-3-|-3--3--3---3-0-0-|-1--1-1-1--1--1-1---8-|--7---5---7----|",
              "-2---2-2-2--2--2-2-|-2-----------0-0-|-2--2-2-2--2--2-2---9-|--7---5---7----|",
              "-2---2-2-2--2--2---|---0-------------|-2--2-2-2--2--2-2---0-|-------------0-|",
              "-------------------|-----------------|----------------------|-------------0-|",
              "-------------------|-----------------|----------------------|---------------|"
            ]
          },
          {
            "Fmaj7": [
              "--1------------------------|------------------------|------------------|-----------------0-|",
              "--1------------------------|------------------------|------------------|-----------------1-|",
              "--2------------------------|------------------------|------------------|-----------------2-|",
              "--3------------------------|------------------------|------------------|-----------------3-|",
              "--3----------3--5h7--5--3--|------------------------|------------------|-------------------|",
              "--1----1-3h5---------------|-5-5--3-3-1-|-1----------5-5|------------------|-------------------|"
            ]
          }
        ],
        "Solo": [
          {
            "Am": [
              "------------------------|---------------------8--8--|",
              "----------------8b10-------|",
              "---------------------------|",
              "---------------------------|",
              "---------------------------|",
              "---------------------------|"
            ]
          },
          {
            "C/G": [
              "---------------------8--10-|-8------------------------5-------|",
              "--------8h10-------------8-5-|",
              "-----------7-5-----------------|",
              "-----------------------------|",
              "-----------------------------|",
              "-----------------------------|"
            ]
          },
          {
            "Fmaj7": [
              "----(13\\12------13\\10)-|",
              "----13\\12------13\\10-----|",
              "--------------------------|",
              "--------------------------|",
              "--------------------------|",
              "--------------------------|"
            ]
          }
        ],
        "Outro": [
          {
            "Am": [
              "-5------------3----------------|-1--3-|-5------------3-------------|--1--3-|",
              "-5------------3----------------|-1--3-|-5------------3-------------|--1--3-|",
              "-5------------4----------------|-2--4-|-5------------4-------------|--2--4-|",
              "-7------------5----------------|-3--5-|-7------------5-------------|--3--5-|",
              "-7------------5----------------|-3--5-|-7------------5-------------|--3--5-|",
              "-5------------3----------------|-1--3-|-5------------3-------------|--1--3-|"
            ]
          },
          {
            "G": [
              "-3--3-3-3--3--0-0---7-|--5---3---5----|-3--3-3-3--3--0-0-|-2-----2-2-2-2-0-0-|",
              "-1--1-1-1--1--1-1---8-|--7---5---7----|-1--1-1-1--1--1-3-|-3-----3-3-3-3-0-0-|",
              "-2--2-2-2--2--2-2---9-|--7---5---7----|-2--2-2-2--2--2-0-|-2-----2-2-2-2-0-0-|",
              "-2--2-2-2--2--2-2---0-|----------0----|-2--2-2-2--2--2---|----0--0-----------|",
              "----------------------|-------------0-|------------------|-------------------|",
              "----------------------|---------------|------------------|-------------------|"
            ]
          },
          {
            "Fmaj7": [
              "------------------|------------------------|-----------------0--|--0--------|",
              "---------1------3-|-0h1----------1---------|-------1---------1--|--1--------|",
              "-------0------0---|-----2-------2----------|-----0--------0--2--|--2--------|",
              "-----2------0-----|---------2--------------|---2--------0----3--|--2--------|",
              "-0h3------2-------|-------0----------0--2--|-3--------2------3--|--0---0-2--|",
              "------------------|------------------------|-----------------1--|-----------|"
            ]
          }
        ]
      }
    });


    newSong.save()
      .then(savedSong => {
        console.log('Song saved:', savedSong);
      })
      .catch(error => {
        console.error('Error saving song:', error);
      })
      .finally(() => {
        mongoose.disconnect()
          .then(() => {
            console.log('Disconnected from MongoDB');
          })
          .catch(error => {
            console.error('Error disconnecting from MongoDB:', error);
          });
      });
  })
  .catch(error => {
    console.error('Error connecting to MongoDB:', error);
  });


   